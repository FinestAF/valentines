<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Valentines for Sara</title>
    <style>
      :root {
        --bg-url: url("background.jpg");
        --card-bg: rgba(0, 0, 0, 0.55);
        --text: #ffffff;
        --muted: rgba(255, 255, 255, 0.85);
        --stroke: rgba(255, 255, 255, 0.18);
      }

      * {
        box-sizing: border-box;
      }

      body {
        margin: 0;
        min-height: 100vh;
        display: grid;
        place-items: center;
        color: var(--text);
        font-family: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        background:
          radial-gradient(1200px 700px at 50% 35%, rgba(0, 0, 0, 0.22), rgba(0, 0, 0, 0.82)),
          var(--bg-url) center / cover no-repeat fixed;
        overflow: hidden;
      }

      .card {
        width: min(720px, calc(100vw - 32px));
        padding: 28px 20px;
        border-radius: 22px;
        background: var(--card-bg);
        border: 1px solid var(--stroke);
        backdrop-filter: blur(10px);
        box-shadow: 0 20px 60px rgba(0, 0, 0, 0.45);
        text-align: center;
        position: relative;
      }

      h1 {
        margin: 0 0 10px;
        font-size: clamp(26px, 3.4vw, 40px);
        letter-spacing: 0.2px;
      }

      p {
        margin: 0 0 22px;
        color: var(--muted);
        font-size: clamp(15px, 2vw, 18px);
      }

      .playfield {
        position: relative;
        width: 100%;
        height: 240px;
        margin-top: 10px;
        border-radius: 18px;
        border: 1px dashed rgba(255, 255, 255, 0.22);
        background: rgba(255, 255, 255, 0.06);
        overflow: hidden;
      }

      .btn-row {
        position: absolute;
        inset: 0;
        display: grid;
        place-items: center;
      }

      button {
        appearance: none;
        border: 0;
        border-radius: 999px;
        padding: 14px 22px;
        font-size: 18px;
        font-weight: 700;
        color: #fff;
        cursor: pointer;
        user-select: none;
        outline: none;
        box-shadow: 0 10px 25px rgba(0, 0, 0, 0.35);
        transition: transform 120ms ease, filter 120ms ease, opacity 160ms ease;
        will-change: transform;
      }

      button:active {
        transform: scale(0.98);
      }

      .yes {
        background: linear-gradient(135deg, rgba(255, 59, 122, 1), rgba(255, 126, 179, 1));
        border: 1px solid rgba(255, 255, 255, 0.22);
        position: relative;
      }

      .no {
        background: linear-gradient(135deg, rgba(50, 50, 50, 1), rgba(30, 30, 30, 1));
        border: 1px solid rgba(255, 255, 255, 0.14);
        position: absolute;
        left: 58%;
        top: 58%;
        transform: translate3d(-50%, -50%, 0);
      }

      .hidden {
        opacity: 0;
        pointer-events: none;
        visibility: hidden;
      }

      .message {
        margin-top: 18px;
        font-size: clamp(18px, 2.6vw, 26px);
        font-weight: 800;
        line-height: 1.2;
        min-height: 1.2em;
      }

      @keyframes shake {
        0%   { transform: translate3d(0, 0, 0); }
        15%  { transform: translate3d(-6px, 0, 0); }
        30%  { transform: translate3d(6px, 0, 0); }
        45%  { transform: translate3d(-5px, 0, 0); }
        60%  { transform: translate3d(5px, 0, 0); }
        75%  { transform: translate3d(-3px, 0, 0); }
        100% { transform: translate3d(0, 0, 0); }
      }

      @keyframes pulse {
        0%   { transform: scale(1); filter: brightness(1); }
        50%  { transform: scale(1.05); filter: brightness(1.08); }
        100% { transform: scale(1); filter: brightness(1); }
      }

      .shake {
        animation: shake 520ms ease-in-out;
      }

      .pulse {
        animation: pulse 900ms ease-in-out infinite;
      }

      @media (prefers-reduced-motion: reduce) {
        .shake, .pulse { animation: none !important; }
      }
    </style>
  </head>

  <body>
    <main class="card" role="main" aria-label="Valentines page">
      <h1>Will you be my Valentines, Sara?</h1>
      <p>Choose wisely.</p>

      <section class="playfield" id="playfield" aria-label="Buttons area">
        <div class="btn-row">
          <button class="yes" id="yesBtn" type="button">Yes</button>
          <button class="no" id="noBtn" type="button">No</button>
        </div>
      </section>

      <div class="message" id="message" aria-live="polite"></div>
    </main>

    <script>
      (function () {
        const playfield = document.getElementById("playfield");
        const yesBtn = document.getElementById("yesBtn");
        const noBtn = document.getElementById("noBtn");
        const message = document.getElementById("message");

        let yesStage = 0; // 0 = first click, 1 = confirm click, 2 = done
        let rafScheduled = false;

        function placeNoButtonRandomly() {
          const pf = playfield.getBoundingClientRect();
          const nb = noBtn.getBoundingClientRect();

          const pad = 12;
          const maxX = Math.max(pad, pf.width - nb.width - pad);
          const maxY = Math.max(pad, pf.height - nb.height - pad);

          const x = pad + Math.random() * (maxX - pad);
          const y = pad + Math.random() * (maxY - pad);

          noBtn.style.left = x + "px";
          noBtn.style.top = y + "px";
          noBtn.style.transform = "translate3d(0, 0, 0)";
        }

        function dodgeNoButtonOptimized() {
          if (noBtn.classList.contains("hidden")) return;
          if (rafScheduled) return;
          rafScheduled = true;

          requestAnimationFrame(() => {
            placeNoButtonRandomly();
            rafScheduled = false;
          });
        }

        // Only move when they try to click it / tap it
        noBtn.addEventListener(
          "pointerdown",
          (e) => {
            e.preventDefault(); // stops the click from landing on touch devices
            dodgeNoButtonOptimized();
          },
          { passive: false }
        );

        function setButtonsHidden(hidden) {
          if (hidden) {
            yesBtn.classList.add("hidden");
            noBtn.classList.add("hidden");
          } else {
            yesBtn.classList.remove("hidden");
            noBtn.classList.remove("hidden");
          }
        }

        function animateYesToAreYouSure() {
          yesBtn.classList.add("shake");
          setTimeout(() => yesBtn.classList.remove("shake"), 540);

          yesBtn.textContent = "Are you sure?";
          yesBtn.classList.add("pulse");
        }

        yesBtn.addEventListener("click", () => {
          if (yesStage === 2) return;

          if (yesStage === 0) {
            yesStage = 1;
            animateYesToAreYouSure();
            return;
          }

          if (yesStage === 1) {
            yesStage = 2;
            yesBtn.classList.remove("pulse");
            setButtonsHidden(true);
            message.textContent = "Thank you for being my valentines Sara, I love you";
          }
        });

        window.addEventListener("load", () => {
          placeNoButtonRandomly();
        });

        window.addEventListener("resize", () => {
          if (!noBtn.classList.contains("hidden")) placeNoButtonRandomly();
        });
      })();
    </script>
  </body>
</html>
